TITLE    SMAG4T8_MUL
PAGE     50,100
N1OFF=	0H
N2OFF=	100H
RESOFF=	200H
SPCH=	250H
ASSUME  CS:CODE_S,SS:STACK_S
STACK_S	SEGMENT	'STACK'
DB	64	DUP(?)
STACK_S	ENDS
CODE_S	SEGMENT	'CODE'
MAIN	PROC	FAR
	PUSH DS
	MOV AX,0
	PUSH AX
	MOV SI,N1OFF
	MOV DI,N2OFF
	MOV AX,[SI]
	CALL MULTI
	PUSH AX
	PUSH CX
	PUSH DX
	MOV AX,[SI+2]
	AND AX,7FFFH
	CALL MULTI
	POP BX
	ADD AX,BX
	POP BX
	ADC DX,BX
	ADC CX,0
	POP BX
	MOV DI,RESOFF
	MOV [DI],BX
	MOV [DI+2],AX
	MOV [DI+4],DX
	MOV BX,N2OFF
	MOV AH,[SI+3]
	XOR AH,[BX+3]
	AND ah,80H
	XOR AL,AL
	ADD CX,AX
	MOV [DI+6],CX
	RET
MAIN	ENDP
MULTI	PROC
	MOV BX,[DI]
	MOV CX,AX
	MUL BX
	PUSH AX
	PUSH DX
	MOV AX,CX
	MOV BX,[DI+2]
	AND BX,7FFFH
	MUL BX
	MOV CX,DX
	POP DX
	ADD DX,AX
	ADC CX,0
	POP AX
	RET
MULTI 	ENDP
CODE_S	ENDS
END	MAIN